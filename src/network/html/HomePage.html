<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CrossPoint Reader</title>
    <style>
      body {
        --font-color: #333;
        --background: #f5f5f5;
        --title-color: #2c3e50;
        --card-background: white;
        --label-color: #7f8c8d;
        --muted-color: #95a5a6;
        --status-ok: #27ae60;
        --border-color: #eee;
        --accent-color: #6e9a82;
        --accent-color-10: rgba(var(--accent-color-rgb), .1);
        --accent-color-25: rgba(var(--accent-color-rgb), .25);
        --accent-color-50: rgba(var(--accent-color-rgb), .5);
        --accent-color-75: rgba(var(--accent-color-rgb), .75);
        --accent-color-highlight: #5a8c73;

        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          Oxygen, Ubuntu, sans-serif;
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
        background-color: var(--background);
        color: var(--font-color);
        font-size: 16px;
      }
      @media (prefers-color-scheme: dark) {
        body {
          --font-color: #f5f5f5;
          --background: #333;
          --title-color: #ecf0f1;
          --card-background: #444;
          --label-color: #bdc3c7;
          --border-color: #555;

          color-scheme: dark;
        }
      }
      h1 {
        margin-top: 0;
        color: var(--title-color);
        display: flex;
        gap: 8px;
        font-size: 24px;
        align-items: center;
        padding-bottom: 10px;
      }
      h1 .logo {
        background-color: #6e9a82;
        padding: 0 4px;
        border-radius: 4px;
      }
      h1 .logo svg {
        width: 18px;
        height: 18px;
      }
      h2 {
        color: var(--title-color);
        margin-top: 0;
        font-size: 20px;
      }
      .card {
        background: var(--card-background);
        border-radius: 4px;
        padding: 15px;
        margin: 15px 0;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }
      .info-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        min-height: 25px;
        padding: 8px 0;
        border-bottom: 1px solid var(--border-color);
      }
      .info-row:last-child {
        border-bottom: none;
        padding-bottom: 0;
      }
      .label {
        color: var(--label-color);
      }
      .value {
        color: var(--title-color);
      }
      .status {
        display: inline-block;
        padding: 4px 10px;
        border-radius: 12px;
        background-color: #27ae60;
        color: white;
        font-size: 0.9em;
      }
      .nav-links {
        margin: 20px 0 15px;
        border-bottom: solid 2px var(--border-color);
        display: flex;
        gap: 8px;
        padding-bottom: 8px;
      }
      .nav-links a {
        padding: 8px 15px;
        font-size: 0.85em;
        color: var(--font-color);
        text-decoration: none;
        border-radius: 4px;
      }
      .nav-links a.active {
        color: var(--font-color);
        text-decoration: none;
        background: var(--accent-color);
      }
      .nav-links a:not(.active):hover {
        color: var(--font-color);
        text-decoration: none;
        background: var(--border-color);
      }
      a {
        color: var(--accent-color);
        text-decoration: none;
      }
      a:hover {
        text-decoration: underline;
      }
      footer {
        display: flex;
        gap: 6px;
        align-items: center;
        font-size: .85em;
      }
      footer .icon {
        height: 20px;
        width: 20px;
      }
      @media (max-width: 600px) {
        body {
          padding: 10px;
          font-size: 14px;
        }
        h1 {
          justify-content: center;
        }
        .card {
          padding: 12px;
          margin: 10px 0;
        }
        .nav-links a {
          padding: 8px 12px;
          margin-right: 6px;
          font-size: 0.9em;
          flex: 1;
          text-align: center;
        }
        footer {
          justify-content: center;
        }
      }
    </style>
  </head>
  <body>
    <h1>
      <span class="logo">
        <svg viewBox="0 0 162 180" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M141.133 1.93774C150.102 -3.44192 161.517 3.01665 161.521 13.4749V166.526C161.517 176.984 150.102 183.442 141.133 178.063L80.7588 141.837L20.3867 178.063C11.4176 183.442 0.00328866 176.984 0 166.526V13.4749C0.00337257 3.01685 11.4176 -3.44137 20.3867 1.93774L80.7598 38.1614L141.133 1.93774ZM121.275 117.524L92.3848 134.864L147.281 167.811C148.277 168.408 149.542 167.685 149.545 166.526V100.567L121.275 117.524ZM14.2393 12.1897C13.2438 11.5924 11.979 12.3152 11.9756 13.4749V86.6125L74.7725 124.29V48.51L14.2393 12.1897Z" fill="black"/>
        </svg>
      </span>
      CrossPoint Reader
    </h1>

    <div class="nav-links">
      <a href="/" class="active">Home</a>
      <a href="/files">File Manager</a>
      <a href="/settings">Settings</a>
    </div>

    <div class="card">
      <h2>Device Status</h2>
      <div class="info-row">
        <span class="label">Version</span>
        <span class="value" id="version"></span>
      </div>
      <div class="info-row">
        <span class="label">WiFi Status</span>
        <span class="status">Connected</span>
      </div>
      <div class="info-row">
        <span class="label">IP Address</span>
        <span class="value" id="ip-address"></span>
      </div>
      <div class="info-row">
        <span class="label">Free Memory</span>
        <span class="value" id="free-heap"></span>
      </div>
    </div>

    <footer>
      <svg class="icon icon-github" aria-hidden="true">
        <use href="#icon-github"></use>
      </svg>
      <a
        href="https://github.com/crosspoint-reader/crosspoint-reader"
        target="_blank"
        >CrossPoint E-Reader â€¢ Open Source</a
      >
    </footer>

    <svg xmlns="http://www.w3.org/2000/svg" style="display: none">
      <symbol viewBox="0 0 24 24" id="icon-github">
        <path fill="currentColor" d="M12,2A10,10,0,0,0,8.84,21.5c.5.08.66-.23.66-.5V19.31C6.73,19.91,6.14,18,6.14,18A2.69,2.69,0,0,0,5,16.5c-.91-.62.07-.6.07-.6a2.1,2.1,0,0,1,1.53,1,2.15,2.15,0,0,0,2.91.83,2.16,2.16,0,0,1,.63-1.34C8,16.17,5.62,15.31,5.62,11.5a3.87,3.87,0,0,1,1-2.71,3.58,3.58,0,0,1,.1-2.64s.84-.27,2.75,1a9.63,9.63,0,0,1,5,0c1.91-1.29,2.75-1,2.75-1a3.58,3.58,0,0,1,.1,2.64,3.87,3.87,0,0,1,1,2.71c0,3.82-2.34,4.66-4.57,4.91a2.39,2.39,0,0,1,.69,1.85V21c0,.27.16.59.67.5A10,10,0,0,0,12,2Z"></path>
      </symbol>
    </svg>
  <script>
    async function fetchStatus() {
      try {
        const response = await fetch('/api/status');
        if (!response.ok) {
          throw new Error('Failed to fetch status: ' + response.status + ' ' + response.statusText);
        }
        const data = await response.json();
        document.getElementById('version').textContent = data.version || 'N/A';
        document.getElementById('ip-address').textContent = data.ip || 'N/A';
        document.getElementById('free-heap').textContent = data.freeHeap
          ? data.freeHeap.toLocaleString() + ' bytes'
          : 'N/A';
      } catch (error) {
        console.error('Error fetching status:', error);
      }
    }

    // Fetch status on page load
    window.onload = fetchStatus;
  </script>
  </body>
</html>
